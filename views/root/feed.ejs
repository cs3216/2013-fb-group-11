<div class="row">
  <div class="large-12 columns index-container">
    <div class="row">
      <div class="large-2 columns menu-container">
        <div class="profile-container">
          <img class="thumbnail" src="<%= 'https://graph.facebook.com/' + fb_user.username + '/picture' %>"/>
          <div class="profile-details-container">
            <a href="#"><%= fb_user.name %></a>
          </div>
        </div>
        <ul>
          <li>
            <h6 class="menu-title">Favourites</h6>
            <ul>
              <li><a href="#"><span class="icon-container"><i class="icon-list-ul"></i></span> Feed</a></li>
              <li><a href="#"><span class="icon-container"><i class="icon-question-sign"></i></span> My Questions</a></li>
              <li><a href="#"><span class="icon-container"><i class="icon-tag"></i></span> Followed</a></li>
              <li><a href="#"><span class="icon-container"><i class="icon-comments"></i></span> Chat</a></li>
              <li><a href="#"><span class="icon-container"><i class="icon-briefcase"></i></span> Organizer</a></li>
            </ul>
          <li>
            <h6 class="menu-title">Modules</h6>
            <ul>
              <li><a href="#">CS1010S</a></li>
              <li><a href="#">CS3216</a></li>
            </ul>
          </li>
          <li class="others">
            <h6 class="menu-title">Others</h6>
            <ul>
              <li><a href="#">About</a></li>
              <li><a href="#" onclick="inviteFbFriends()">Invite Friends</a></li>
              <li><a href="#">Privacy</a></li>
              <li><a href="#">Terms</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="large-10 columns content-container">
        <div ng-controller="CourseController">
          <h3>Feed</h3>
          <hr/>
          {{ console.log(course) }}
          <ul class="posts-list">
            <li class="post-item" ng-repeat="question in course.questions">
              <div class="post-question-container">
                <div class="post-summary-column">
                  <img class="thumbnail" ng-src="{{ formatThumbnail(question.user.facebook_id) }}" />
                  <p class="post-score-action"><i class="icon-chevron-sign-up"></i></p>
                  <p class="post-score">{{ question.score }} </p>
                  <p class="post-score-action"><i class="icon-chevron-sign-down"></i></p>
                </div>
                <div class="post-question-content">
                  <h4 class="post-title"><a href="#">{{ question.title }}</a></h4>
                  <p>{{ question.content }}</p>
                  <p class="post-details">{{ formatDate(question.createdAt) }} &middot; 
                    <span class="post-user-reply">Asked by {{ question.user.name }}</span> &middot;
                    <span class="post-unanswered"></span> &middot; 
                    <a ng-init="question.comment_open = false" ng-click="question.comment_open = !question.comment_open;">
                      {{ question.comments.length }} Comment<span ng-show="question.comments.length != 1">s</span>
                    </a> &middot;
                    <a ng-init="question.answer_open = false" ng-click="question.answer_open = !question.answer_open">
                      {{ question.answers.length }} Answer<span ng-show="question.answers.length != 1">s</span></a>
                    <span ng-show="question.action_open"> &middot;
                      <a ng-click="question.action_open = false">Cancel reply</a>
                    </span>
                  </p>
                  <!-- <div class="post-action-container" ng-init="question.action_open = false">
                    <textarea ng-model="user_answer"></textarea>
                    <a href="#" class="button post-action-button" ng-click="addAnswer(question, user_answer)">Answer</a>
                  </div> -->
                  <div class="post-comments-container" ng-show="question.comments.length && question.comment_open">
                    <h5 class="post-section-title">{{ question.comments.length }} Comment<span ng-show="question.comments.length != 1">s</span></h5>
                    <div ng-repeat="comment in question.comments">
                      <img class="thumbnail-small" ng-src="{{ formatThumbnail(comment.user.facebook_id) }}" />
                      <div class="post-comment-container">
                        <p class="post-section-text" >{{ comment.content }}</p>
                        <p class="post-details">
                          {{ formatDate(comment.createdAt) }} &middot; <span class="post-user-reply">{{ comment.user.name }}</span>
                        </p>
                      </div>
                    </div>
                  </div>
                  <!-- <hr/ ng-show="question.answers.length"> -->
                </div>
              </div>
              <div class="post-answers-container" ng-show="question.answers.length && question.answer_open">
                <h5 class="post-answers-title">{{ question.answers.length }} Answer<span ng-show="question.answers.length != 1">s</span></h5>
                <div class="post-answer-container" ng-repeat="answer in question.answers">
                  <div class="post-answer-summary-column">
                    <img class="thumbnail-small" ng-src="{{ formatThumbnail(answer.user.facebook_id) }}" />
                    <p class="post-score-action"><i class="icon-chevron-sign-up"></i></p>
                    <p class="post-score">{{ answer.score }} </p>
                    <p class="post-score-action"><i class="icon-chevron-sign-down"></i></p>
                  </div>
                  <div class="post-answer-content">
                    <p>{{ answer.content }}</p>
                    <p class="post-details">
                      {{ formatDate(answer.createdAt) }} &middot; <span class="post-user-reply">{{ answer.user.name }}</span>
                    </p>
                    <div class="post-comments-container" ng-show="answer.comments.length">
                      <h5 class="post-section-title">{{ question.comments.length }} Comment<span ng-show="answer.comments.length != 1">s</span></h5>
                      <div ng-repeat="comment in answer.comments">
                        <img class="thumbnail-small" ng-src="{{ formatThumbnail(comment.user.facebook_id) }}" />
                        <div class="post-comment-container">
                          <p class="post-section-text" >{{ comment.content }}</p>
                          <p class="post-details">
                            {{ formatDate(comment.createdAt) }} &middot; <span class="post-user-reply">{{ comment.user.name }}</span>
                          </p>                        
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <hr />
            </li>
          </ul> 
        </div>
      </div>
    </div>
  </div>
</div>